(this["webpackJsonpspd-u-practice-redux"]=this["webpackJsonpspd-u-practice-redux"]||[]).push([[0],{48:function(t,e,n){},49:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),c=n(13),s=n.n(c),o=(n(48),n(49),n(50),n(71)),r=n(11),u=n(9),l=n(14),j=n(18),d=n.n(j),f=n(33),b=Object(u.c)("stations/load-stations",function(){var t=Object(f.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://all.api.radio-browser.info/json/stations/bycountry/".concat(e)).then((function(t){return t.json()})).then((function(t){return t.sort((function(t,e){return e.votes-t.votes}))}));case 2:return n=t.sent,t.abrupt("return",{stations:n,country:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),v=Object(u.c)("stations/load-countries",Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://all.api.radio-browser.info/json/countries").then((function(t){return t.json()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))),O=Object(u.c)("stations/load-favourite-stations",Object(f.a)(d.a.mark((function t(){var e,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=JSON.parse(localStorage.favourites),t.next=3,Promise.all(e.map((function(t){return fetch("http://all.api.radio-browser.info/json/stations/byuuid/".concat(t)).then((function(t){return t.json()})).then((function(t){return t[0]}))})));case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))),x=Object(u.b)("stations/set-favourite"),h=Object(u.b)("stations/set-active-station"),g=Object(u.b)("stations/set-country"),p=Object(u.b)("stations/delete-favourite"),y=Object(u.b)("stations/change-isPause"),S=Object(u.d)({allStations:{},favouriteStations:[],activeStation:{isPlay:!1},countries:[]},(function(t){return t.addCase(b.fulfilled,(function(t,e){var n=e.payload;t.allStations[n.country]=n.stations})).addCase(v.fulfilled,(function(t,e){var n=e.payload;t.countries=n})).addCase(g,(function(t,e){var n=e.payload;t.selectedCountry=n.selectedCountry})).addCase(h,(function(t,e){var n=e.payload;t.activeStation=n})).addCase(x,(function(t,e){var n=e.payload;t.favouriteStations.push(n)})).addCase(O.fulfilled,(function(t,e){var n=e.payload;t.favouriteStations=n})).addCase(p,(function(t,e){var n=e.payload;t.favouriteStations=t.favouriteStations.filter((function(t){return t.stationuuid!==n.id}))})).addCase(y,(function(t,e){var n=e.payload;t.activeStation.isPlay=n.isPlay}))})),m=Object(l.b)({stations:S}),C=Object(u.a)({reducer:m,devTools:!0}),N=n(72),P=n(74),T=n(68),w=n(69),k=n(43),_=r.c,F=function(t){return t.stations.activeStation.station},I=function(t){var e;return null===(e=t.stations.activeStation.station)||void 0===e?void 0:e.stationuuid},J=function(t){var e;return null===(e=t.stations.activeStation.station)||void 0===e?void 0:e.url},E=function(t){return t.stations.activeStation.isPlay},z=function(t){return t.stations.countries},B=function(t){return t.stations.selectedCountry},K=function(t,e){return t.stations.favouriteStations.map((function(t){return t.stationuuid})).includes(e)},A=function(t){var e=B(t);return t.stations.allStations[e||""]},L=function(t){return t.stations.favouriteStations},U=n(73),D=n(66),G=n(70),H=n(67),M=n(2),R=function(t){var e=t.active,n=t.onClick;return Object(M.jsx)(D.a,{variant:"outline-light",onClick:n,children:e?Object(M.jsx)(H.a,{}):Object(M.jsx)(H.b,{})})},q=(n(58),function(t){var e=t.toggle,n=t.children;return Object(M.jsx)("button",{className:"play-button",onClick:e,children:n})}),Q=n(22),V=function(t){var e=t.station,n=t.favouriteStatus,a=t.favouriteToggle,i=t.playToggle,c=t.activeStationId,s=t.activeStationIsPlay;return Object(M.jsxs)(U.a,{className:"station-card",children:[Object(M.jsxs)(U.a.Body,{children:[Object(M.jsx)(U.a.Title,{children:e.name}),Object(M.jsxs)(T.a,{children:[Object(M.jsx)(w.a,{lg:4,children:e.favicon?Object(M.jsx)("img",{className:"station-card__img",alt:e.name,src:e.favicon,loading:"lazy"}):Object(M.jsx)(G.a,{style:{height:"150px"},size:"100%"})}),Object(M.jsx)(w.a,{lg:8,children:Object(M.jsx)(U.a.Text,{children:e.homepage})})]})]}),Object(M.jsx)(U.a.Footer,{children:Object(M.jsxs)("div",{className:"d-flex",children:[Object(M.jsx)(D.a,{children:"Go to page"}),Object(M.jsx)(R,{active:n,onClick:a}),Object(M.jsx)(q,{toggle:i,children:c===e.stationuuid&&s?Object(M.jsx)(Q.a,{}):Object(M.jsx)(Q.b,{})})]})})]})},W=function(t){var e=t.station,n=Object(r.b)(),a=JSON.parse(localStorage.favourites),i=_((function(t){return K(t,e.stationuuid)})),c=_(I),s=_(E);return Object(M.jsx)(V,{station:e,favouriteStatus:i,favouriteToggle:function(){i?(localStorage.favourites=JSON.stringify(a.filter((function(t){return t!==e.stationuuid}))),n(p({id:e.stationuuid}))):(localStorage.favourites=JSON.stringify([].concat(Object(k.a)(a),[e.stationuuid])),n(x(e)))},playToggle:function(){c===e.stationuuid?n(y({isPlay:!s})):n(h({station:e,isPlay:!0}))},activeStationId:c,activeStationIsPlay:s})},X=function(t){var e=t.countries,n=Object(r.b)();return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("select",{onChange:function(t){var e=t.target.value;localStorage.country=e,n(g({selectedCountry:e}))},className:"select",children:e.map((function(t){return Object(M.jsx)("option",{selected:localStorage.country===t.name,value:t.name,children:t.name},t.name)}))})})},Y=(n(59),function(t){var e=t.station,n=t.favouriteStatus,a=t.favouriteToggle,i=t.playToggle,c=t.activeStationIsPlay,s=t.activeStationUrl,o=t.audio;return Object(M.jsxs)("div",{className:"active-stations",children:[Object(M.jsx)("audio",{ref:o,src:s}),Object(M.jsx)("h1",{children:"Current Station"}),Object(M.jsxs)("div",{className:"active-stations__info",children:[e.favicon?Object(M.jsx)("img",{alt:e.name,src:e.favicon,className:"active-stations__img",loading:"lazy"}):Object(M.jsx)(G.a,{size:"200px"}),Object(M.jsxs)("div",{className:"active-stations__describe",children:[Object(M.jsxs)("h3",{children:["Name: ",e.name]}),Object(M.jsxs)("h4",{children:["HomePage: ",e.homepage]})]}),Object(M.jsxs)("div",{className:"active-stations__buttons",children:[Object(M.jsx)(q,{toggle:i,children:c?Object(M.jsx)(Q.a,{}):Object(M.jsx)(Q.b,{})}),Object(M.jsx)(R,{active:n,onClick:a})]})]})]})}),Z=function(t){var e=t.station,n=Object(r.b)(),i=_((function(t){return K(t,e.stationuuid)})),c=_(E),s=_(J),o=Object(a.useRef)(new Audio(s));Object(a.useEffect)((function(){c?o.current.play():o.current.pause()}),[s,c]);return Object(M.jsx)(Y,{station:e,favouriteStatus:i,favouriteToggle:function(){n(i?p({id:e.stationuuid}):x(e))},playToggle:function(){n(y({isPlay:!c}))},activeStationIsPlay:c,activeStationUrl:s,audio:o})},$=function(){var t=Object(r.b)(),e=_(z),n=_(B),i=_(F),c=_(A);return Object(a.useEffect)((function(){t(v()),t(O())}),[t]),Object(a.useEffect)((function(){n&&(c||t(b(localStorage.country)))}),[t,c,n]),Object(a.useEffect)((function(){!localStorage.country&&e.length&&(localStorage.country=e[0].name),localStorage.country&&t(g({selectedCountry:localStorage.country}))}),[t,e]),Object(M.jsxs)("div",{children:[Object(M.jsx)(X,{countries:e}),i&&Object(M.jsx)(Z,{station:i}),Object(M.jsx)(T.a,{xs:1,md:2,className:"g-4",children:c&&c.map((function(t){return Object(M.jsx)(w.a,{children:Object(M.jsx)(W,{station:t})},t.stationuuid)}))})]})},tt=function(){var t=_(L);return Object(M.jsxs)("div",{children:[!t.length&&Object(M.jsx)("h2",{className:"text-center",children:"Favourite list is empty"}),Object(M.jsx)(T.a,{xs:1,md:2,className:"g-4",children:t.map((function(t){return Object(M.jsx)(w.a,{children:Object(M.jsx)(W,{station:t})},t.stationuuid)}))})]})},et=function(){return Object(M.jsxs)(N.a,{defaultActiveKey:"all-stations",className:"mb-3",children:[Object(M.jsx)(P.a,{eventKey:"all-stations",title:"Stations",children:Object(M.jsx)($,{})}),Object(M.jsx)(P.a,{eventKey:"favourites",title:"Favourites",children:Object(M.jsx)(tt,{})})]})};var nt=function(){return Object(a.useEffect)((function(){localStorage.favourites||(localStorage.favourites=JSON.stringify([]))}),[]),Object(M.jsx)(r.a,{store:C,children:Object(M.jsx)(o.a,{className:"mt-3",children:Object(M.jsx)(et,{})})})},at=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),c(t),s(t)}))};s.a.render(Object(M.jsx)(i.a.StrictMode,{children:Object(M.jsx)(nt,{})}),document.getElementById("root")),at()}},[[63,1,2]]]);
//# sourceMappingURL=main.04132a91.chunk.js.map